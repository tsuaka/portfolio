# SuperSocketLite와 MessagePack을 이용한 채팅 서버와 Windows Forms 채팅 클라이언트

## 개요

이 프로젝트는 **SuperSocketLite**와 **MessagePack**을 사용하여 간단한 채팅 서버와 Windows Forms 애플리케이션을 통한 채팅 클라이언트를 구축하는 방법을 설명합니다. `SuperSocketLite`는 네트워크 서버 구축을 위한 라이브러리이고, `MessagePack`은 고속의 이진 직렬화 및 역직렬화 라이브러리로, 채팅 서버와 클라이언트 간의 데이터를 효율적으로 전송할 수 있습니다.

## 요구 사항

- .NET Framework 4.5 이상
- Visual Studio
- SuperSocketLite 라이브러리
- MessagePack 라이브러리

- ## 설치

프로젝트에 `MessagePack`을 사용하려면 NuGet 패키지를 설치해야 합니다. 아래 명령어를 사용하여 `MessagePack`을 설치합니다.


## SuperSocketLite 채팅 서버

`SuperSocketLite`를 사용하여 채팅 서버를 구현하고, `MessagePack`을 이용해 데이터를 직렬화 및 역직렬화합니다. 이렇게 하면 메시지를 효율적으로 전송할 수 있습니다.

## 실행 방법

1. **서버 실행**:
   - `ChatServer` 프로젝트를 빌드하고 실행하여 서버를 시작합니다.
   - "launchSettings.json" 의 commandLineArgs 항목을 통해 서버의 방 최대 인원 최대 버퍼 사이즈 포트 등의 정보를 세팅합니다.
   - 서버가 세팅한 포트에서 클라이언트를 기다립니다.

2. **클라이언트 실행**:
   - `ChatClient` 프로젝트를 빌드하고 실행합니다.
   - 클라이언트에서 접속할 서버의 IP와 Port를 입력하고 "접속" 버튼을 클릭하여 서버에 접속합니다.
   - "접속 끊기" 버튼을 클릭하여 서버와의 접속을 끊을 수 있습니다.
   - 클라이언트에서 사용자 이름을 입력하고 "로그인" 버튼을 클릭하여 서버에 로그인합니다.
   - 입장할 채팅방 번호를 입력 후 "방 입장" 버튼을 클릭하여 원하는 채팅방에 입장합니다.
   - "보내기" 버튼을 클릭하여 메시지를 전송하고, 다른 클라이언트로부터 오는 메시지를 실시간으로 확인합니다.
   - "방 나가기" 버튼을 입력하여 채팅방에서 나갈 수 있습니다.


## 서버 코드: 로그인 기능 및 채팅방 관리
  * 서버는 로그인 인증을 처리하고, 사용자가 특정 채팅방에 입장하여 채팅할 수 있도록 관리합니다.

## 클라이언트 코드: 로그인 및 채팅방 입장 기능
  * 클라이언트는 서버에 로그인하고, 채팅방에 입장하여 메시지를 주고받을 수 있습니다.

## 동작 방식

이 프로젝트는 서버와 클라이언트 간의 메시지 전송을 관리하는 방식으로 동작합니다. 주요 흐름은 다음과 같습니다:

1. **서버**는 `SuperSocketLite`를 이용하여 클라이언트와 연결을 처리하고, 채팅방을 관리합니다.
2. **클라이언트**는 사용자가 로그인하고 채팅방에 입장한 후, 다른 클라이언트와 메시지를 주고받을 수 있습니다.
3. **서버접속** 사용자는 접속할 서버의 IP와 Port를 입력 한 후 서버에 접속합니다.
4. **로그인**: 사용자는 자신의 이름을 입력하여 서버에 로그인합니다.
5. **채팅방 입장**: 로그인 후 사용자는 특정 채팅방에 입장할 수 있습니다.
6. **메시지 전송**: 사용자가 채팅방에 메시지를 전송하면, 서버는 해당 채팅방에 있는 모든 사용자에게 메시지를 브로드캐스트합니다.
7. **브로드캐스팅**: 서버는 같은 채팅방에 있는 클라이언트들에게만 메시지를 전달합니다.
8. **채팅방 퇴장**: 사용자가 채팅방에서 퇴장하면 남은 사용자에게 퇴장을 알립니다.

### 동작 흐름

1. **서버 시작**:
   - 서버는 지정된 IP 주소(`127.0.0.1`)와 포트(`32451`)에서 클라이언트의 연결을 기다립니다.
   - `SuperSocketLite`는 다수의 클라이언트와 연결을 처리하고, 각 클라이언트에 대한 세션을 관리합니다.

2. **클라이언트 로그인**:
   - 클라이언트가 연결을 시도하고, 로그인 창에서 사용자 이름을 입력하면 서버에 `"Login"` 패킷을 보냅니다.
   - 서버는 해당 사용자 이름을 확인하고, 클라이언트에게 로그인 성공 또는 실패 메시지를 보냅니다.

3. **채팅방 입장**:
   - 로그인 성공 후, 클라이언트는 원하는 채팅방을 선택하여 `"RoomEnter"` 패킷을 서버로 전송합니다.
   - 서버는 해당 클라이언트를 해당 채팅방에 추가하고, 입장 성공 메시지를 클라이언트에게 전달합니다.
   - 서버는 각 채팅방에 참여한 클라이언트를 추적하고, 동일 채팅방에 있는 모든 클라이언트에게 패킷을 전달합니다.

4. **메시지 전송 및 수신**:
   - 클라이언트가 메시지를 입력하고 `"Message"` 패킷을 서버로 보내면, 서버는 해당 채팅방에 참여한 모든 사용자에게 패킷을 브로드캐스트합니다.
   - 클라이언트는 서버로부터 받은 메시지를 실시간으로 화면에 표시합니다.

5. **채팅방 퇴장**:
   - 사용자가 `"RoomLeave"`을 패킷을 보내면 채팅방에서 퇴장합니다.
   - 사용자가 퇴장하면 동일 채팅방에 있는 모든 클라이언트에 퇴장한 유저 정보 패킷을 전달합니다.

6. **세션 종료**:
   - 사용자가 연결을 종료하면, 서버는 해당 클라이언트의 세션을 종료하고, 연결된 다른 클라이언트들에게 종료 패킷을 전송할 수 있습니다.